<h3>Code snippets</h3>

<script type="text/javascript">
/* trim() from
http://stackoverflow.com/questions/1418050/string-strip-for-javascript
*/
if(typeof(String.prototype.trim) === "undefined")
{
    String.prototype.trim = function() 
    {
        return String(this).replace(/^\s+|\s+$/g, '');
    };
}

/* This script and many more are available free online at
The JavaScript Source!! http://javascript.internet.com
Created by: Robert Nyman | http://robertnyman.com/ */

function removeHTMLTags(strInputCode){
	/* 
			This line is optional, it replaces escaped brackets with real ones, 
			i.e. < is replaced with < and > is replaced with >
	*/	
 	strInputCode = strInputCode.replace(/&(lt|gt);/g, function (strMatch, p1){
	 	return (p1 == "lt")? "<" : ">";
	});
	var strTagStrippedText = strInputCode.replace(/<\/?[^>]+(>|$)/g, "");
	return strTagStrippedText;
}

function showCodeSnippets() {
  pycode = "";
  blankline = 1;
  var div = document.getElementsByTagName("div");
  for (var i = 0; i < div.length; i++) {
    if (div.item(i).className == "highlight-python") {
      HTML = div.item(i).innerHTML;
      if (HTML.search('class="highlight"') > -1) {
        cleanHTML = removeHTMLTags(HTML);
        if (cleanHTML.search('>>> ') > -1) {
          cleanHTML = cleanHTML.split('\n');
          for (var j = 0; j < cleanHTML.length; j++) {
            line = cleanHTML[j]
            if (line.indexOf('>>> ') == 0) {
              pycode += line.slice(4) + "\n"
              blankline = 0;
            } else if (line != "") {
              pycode += "# " + line + "\n";
              blankline = 0;
            } else if (blankline == 0) {
              pycode += "\n";
              blankline = 1;
            }
          } 
        } else {
          cleanHTML = cleanHTML.split('\n');
          for (var j = 0; j < cleanHTML.length; j++) {
            line = cleanHTML[j]
            if (line != "") {
              pycode += line + "\n";
              blankline = 0;
            } else if (blankline == 0) {
              pycode += "\n";
              blankline = 1;
            }
          }
        }
      }
    }
  }
  if (pycode == "") {
    alert("This page does not contain any code snippets.");
  } else {
    prolog = "#!/usr/bin/env python\n"
    prolog += "'''This code was copied from ProDy documentation:\n"
    prolog += "http://www.csb.pitt.edu/People/abakan/software/ProDy'''\n\n"
    prolog += "__author__ = 'Ahmet Bakan'\n"
    prolog += "__copyright__ = 'Copyright (C) 2010 Ahmet Bakan'\n\n"
    popupCode('<pre>' + prolog + pycode + '</pre>')
    /*alert(prolog + pycode);*/
  }
}
function popupCode(code){ 
  popup = window.open(this.href, 'ProDyCode', 'width=500,height=300,scrollbars=yes');
  popup.document.body.innerHTML = code
  return false;
} 
function showHelp() {
  helpText  = "You can get Python code snippets from this page by clicking on "
  helpText += "\"Show code snippets\" button. Code will appear in a popup window.\n\n"
  helpText += "To copy the code into your clipboard:\n"
  helpText += " 1. Click somewhere on the text in the popup window.\n"
  helpText += " 2. Press \"Ctrl+A\" to select all of the Python code.\n"
  helpText += " 3. Press \"Ctrl+C\" to copy your selection into your clipboard.\n"
  helpText += " 4. Close the popup window.\n"
  helpText += " 5. Open a new file in your text editor and paste the code."
  alert(helpText)
}
</script>
<p> 
<input type="button" onclick="showCodeSnippets()" value="Show code snippets" /> 
<input type="button" onclick="showHelp()" value="Help" />
</br>
</p>

